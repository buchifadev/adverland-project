(this["webpackJsonpadverland-project"]=this["webpackJsonpadverland-project"]||[]).push([[0],{318:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"advertIndex","type":"uint256"}],"name":"advertDetails","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"allActiveAdverts","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"string","name":"imageUrl","type":"string"}],"name":"createAdvert","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"advertIndex","type":"uint256"}],"name":"fundAdvert","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"viewAccumulatedViews","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"advertIndex","type":"uint256"}],"name":"viewAdvert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"viewContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"viewCounter","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"viewMinimumDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"viewOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},327:function(e,t,n){},328:function(e,t,n){},332:function(e,t,n){},347:function(e,t){},349:function(e,t){},361:function(e,t){},362:function(e,t){},382:function(e,t){},386:function(e,t){},392:function(e,t){},394:function(e,t){},407:function(e,t){},421:function(e,t){},451:function(e,t){},452:function(e,t){},482:function(e,t){},509:function(e,t){},689:function(e,t,n){},690:function(e,t,n){},692:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(48),r=n.n(c),i=(n(326),n(5)),s=n(21),u=n(11),l=n(698),o=n(90),d=n(6),j=(n(327),n(328),n(1)),b=function(e){var t=e.balance,n=e.showDashboard;return Object(j.jsx)("div",{className:"nav",children:Object(j.jsx)("div",{className:"blink",children:Object(j.jsxs)("div",{className:"content-area",children:[Object(j.jsxs)("div",{className:"nav-title",children:[Object(j.jsx)("div",{children:"AdverLand"}),Object(j.jsx)("div",{className:"title-sub",children:"Adverts made more accessible on the blockchain"})]}),Object(j.jsxs)("div",{className:"nav-links",children:[Object(j.jsx)(o.b,{to:"/new-advert",children:Object(j.jsx)("div",{className:"link",children:"New Advert"})}),n&&Object(j.jsx)(o.b,{to:"/dashboard",children:Object(j.jsx)("div",{className:"link",children:"Dashboard"})}),Object(j.jsxs)("div",{className:"link balance",children:["Bal ",Object(j.jsxs)("span",{children:[t," Celo"]})]})]})]})})})},p=n(26),h=n.n(p),f=n(76),O=n(45),v=function(e){var t=e.fundAd,n=e.adIndex,c=Object(a.useState)(1),r=Object(u.a)(c,2),l=r[0],o=r[1],d=Object(a.useState)(!1),b=Object(u.a)(d,2),p=b[0],h=b[1],v=function(){return h(!1)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(f.a,{variant:"primary",onClick:function(){return h(!0)},children:"Fund"}),Object(j.jsxs)(O.a,{show:p,onHide:v,children:[Object(j.jsx)(O.a.Header,{closeButton:!0,children:Object(j.jsx)(O.a.Title,{children:"Fund your advert here"})}),Object(j.jsx)(O.a.Body,{children:Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"flexStart",flexDirection:"column",fontFamily:"Josefin Sans"},children:[Object(j.jsx)("div",{children:"How much would you like to fund advert with (in Celo)"}),Object(j.jsx)("input",{type:"number",min:1,value:l,onChange:function(e){return o(e.target.value)}})]})}),Object(j.jsxs)(O.a.Footer,{children:[Object(j.jsx)(f.a,{variant:"secondary",onClick:v,children:"Close"}),Object(j.jsx)(f.a,{variant:"primary",onClick:Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n,l));case 1:case"end":return e.stop()}}),e)}))),children:"Fund"})]})]})]})},x=function(e){var t=e.account,n=e.ads,a=e.viewAd,c=e.fundAd;return Object(j.jsx)("div",{className:"ads",children:null===n||void 0===n?void 0:n.map((function(e){return Object(j.jsx)("div",{className:"rim",children:Object(j.jsxs)("div",{className:"ad",children:[Object(j.jsx)("div",{className:"at",children:e.title}),Object(j.jsx)("img",{className:"ad-img",src:e.imageUrl}),Object(j.jsx)("div",{className:"ad-description",children:e.description}),Object(j.jsxs)("div",{className:"ad-views",children:["Views: ",e.views]}),Object(j.jsxs)("div",{className:"ad-bal",children:["Bal: ",new h.a(e.balance).shiftedBy(-18).toString()," Celo"]}),Object(j.jsxs)("div",{className:"abt",children:[t!=e.owner&&Object(j.jsx)("button",{onClick:Object(s.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a(e.index));case 1:case"end":return t.stop()}}),t)}))),children:"View"}),t==e.owner&&Object(j.jsx)(v,{fundAd:c,adIndex:e.index})]})]})})}))})},m=function(e){var t=e.newAd,n=Object(a.useState)(),c=Object(u.a)(n,2),r=c[0],l=c[1],o=Object(a.useState)(),b=Object(u.a)(o,2),p=b[0],h=b[1],v=Object(a.useState)(),x=Object(u.a)(v,2),m=x[0],y=x[1],w=Object(d.l)(),g=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r,p,m);case 2:w("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(O.a,{show:!0,children:[Object(j.jsx)(O.a.Header,{children:Object(j.jsx)(O.a.Title,{children:"Add new advert to the blockchain"})}),Object(j.jsx)(O.a.Body,{children:Object(j.jsxs)("div",{className:"form",style:{display:"flex",justifyContent:"center",alignItems:"flexStart",flexDirection:"column",fontFamily:"Josefin Sans"},children:[Object(j.jsx)("div",{className:"lbl",children:"Advert Title"}),Object(j.jsx)("input",{value:r,onChange:function(e){return l(e.target.value)}}),Object(j.jsx)("div",{className:"lbl",children:"Advert Description"}),Object(j.jsx)("textarea",{value:p,onChange:function(e){return h(e.target.value)}}),Object(j.jsx)("div",{className:"lbl",children:"Advert Image"}),Object(j.jsx)("input",{value:m,onChange:function(e){return y(e.target.value)}})]})}),Object(j.jsxs)(O.a.Footer,{children:[Object(j.jsx)(f.a,{variant:"secondary",onClick:function(){return w("/")},children:"Exit"}),Object(j.jsx)(f.a,{variant:"primary",onClick:function(){return g()},children:"Submit draft"})]})]})})},y=(n(332),function(e){var t=e.contractBal,n=e.withdrawable,a=e.withdraw;return Object(j.jsx)("div",{className:"dsb",children:Object(j.jsxs)("table",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Contract balance"}),Object(j.jsxs)("td",{children:[t," Celo"]})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Withdrawable"}),Object(j.jsxs)("td",{children:[n," Celo"]})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a());case 1:case"end":return e.stop()}}),e)}))),children:"Withdraw"})})]})]})})}),w=n(315),g=n(318),k=n(319),A=n.n(k),N=(n(689),function(){return Object(j.jsx)("div",{className:"footer",children:"Adverland @2022"})}),C=new h.a(2).shiftedBy(18).toString(),S=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),p=Object(u.a)(r,2),f=p[0],O=p[1],v=Object(a.useState)(),k=Object(u.a)(v,2),S=k[0],T=k[1],B=Object(a.useState)(),F=Object(u.a)(B,2),M=F[0],D=F[1],I=Object(a.useState)(),E=Object(u.a)(I,2),J=E[0],H=E[1],V=Object(a.useState)(),U=Object(u.a)(V,2),W=U[0],L=U[1],P=Object(a.useState)(),Y=Object(u.a)(P,2),K=Y[0],q=Y[1],z=Object(a.useState)(),G=Object(u.a)(z,2),Q=G[0],R=G[1];Object(a.useEffect)((function(){Z()}),[]),Object(a.useEffect)((function(){J&&M&&X()}),[J,M]),Object(a.useEffect)((function(){f&&ee()}),[f]);var X=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){var t,n,a,r,s,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getTotalBalance(M);case 3:return t=e.sent,n=t.CELO.shiftedBy(-18).toFixed(2),a=new J.web3.eth.Contract(g,"0x353D57926b73161475C412cd7DFac216eDf141a1"),e.next=8,a.methods.viewOwner().call();case 8:if(r=e.sent,T(r),c(n),O(a),M!=r){e.next=28;break}return e.prev=13,e.next=16,a.methods.viewAccumulatedViews().call();case 16:return s=e.sent,u=new h.a(s).dividedBy(2).toString(),e.next=20,a.methods.viewContractBalance().call();case 20:l=e.sent,R(u),q(new h.a(l).shiftedBy(-18).toString()),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),console.log(e.t0);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),console.log(e.t1);case 33:case"end":return e.stop()}}),e,null,[[0,30],[13,25]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){var t,n,a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=20;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new A.a(window.celo),n=Object(w.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:a=e.sent,c=a[0],n.defaultAccount=c,H(n),D(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:e.next=21;break;case 20:alert("You need to install the celo wallet extension in order to use this app");case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();function $(){return($=Object(s.a)(Object(i.a)().mark((function e(t,n,a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.methods.createAdvert(t,n,a).send({from:M,value:C});case 3:alert("New Advert created"),ee(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(){return(_=Object(s.a)(Object(i.a)().mark((function e(t,n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new h.a(n).shiftedBy(18).toString(),e.prev=1,e.next=4,f.methods.fundAdvert(t).send({from:M,value:a});case 4:ee(),alert("Your advert has been funded!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return te=Object(s.a)(Object(i.a)().mark((function e(){var t,n,a,c,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.methods.allActiveAdverts().call();case 3:for(t=e.sent,n=[],a=function(e){var t=new Promise(function(){var t=Object(s.a)(Object(i.a)().mark((function t(n,a){var c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.methods.advertDetails(e).call();case 2:c=t.sent,n({index:e,owner:c[0],title:c[1],description:c[2],imageUrl:c[3],balance:c[4],views:c[5]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());n.push(t)},c=0;c<t.length;c++)a(c);return e.next=9,Promise.all(n);case 9:r=e.sent,console.log(r),L(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),te.apply(this,arguments)}function ne(){return(ne=Object(s.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.methods.viewAdvert(t).send({from:M});case 3:alert("Advert view complete!"),ee(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ae(){return(ae=Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.methods.claimFees().send({from:M});case 3:alert("Fees claimed successfully"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(j.jsx)(j.Fragment,{children:M&&S?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(o.a,{children:[Object(j.jsx)(b,{balance:n,showDashboard:M==S}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{path:"/",element:Object(j.jsx)(x,{account:M,ads:W,viewAd:function(e){return ne.apply(this,arguments)},fundAd:function(e,t){return _.apply(this,arguments)}})}),Object(j.jsx)(d.a,{path:"/new-advert",element:Object(j.jsx)(m,{newAd:function(e,t,n){return $.apply(this,arguments)}})}),Object(j.jsx)(d.a,{path:"/dashboard",element:Object(j.jsx)(y,{contractBal:K,withdrawable:Q,withdraw:function(){return ae.apply(this,arguments)}})})]}),Object(j.jsx)(N,{})]})}):Object(j.jsx)("div",{className:"spinx",children:Object(j.jsx)(l.a,{animation:"border",variant:"success",style:{width:"100px",height:"100px"}})})})};n(690);r.a.render(Object(j.jsx)(S,{}),document.getElementById("root"))}},[[692,1,2]]]);
//# sourceMappingURL=main.805e63c7.chunk.js.map